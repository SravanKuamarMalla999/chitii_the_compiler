<!DOCTYPE html>
<html>
<head>
    <title>Chitti IDE</title>
    <style>
      textarea {
        width: 100%;
        height: 300px;
        font-family: monospace;
        font-size: 14px;
      }
      pre {
        background: #f0f0f0;
        padding: 10px;
        height: 200px;
        overflow: auto;
      }
      button {
        margin-top: 10px;
        padding: 10px 20px;
        font-size: 16px;
      }
    </style>
</head>
<body>
  <h2>Chitti The Compiler - IDE</h2>
  <textarea id="code" spellcheck="false">// Write your code here</textarea><br/>
  <button onclick="compileAndRun()">Compile & Run</button>
  <h3>Output:</h3>
  <pre id="output"></pre>
  <h3>Error:</h3>
  <pre id="error"></pre>

  <script>
    async function compileAndRun() {
      const code = document.getElementById('code').value;
      document.getElementById('output').textContent = '';
      document.getElementById('error').textContent = '';

      const response = await fetch('/compile', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({code})
      });

      const data = await response.json();

      if(data.error) {
        document.getElementById('error').textContent = data.error;
      } else {
        document.getElementById('output').textContent = data.output;
      }
    }
  </script>
</body>
</html>
